---
import { marked } from "marked"
import BlogPost from '../../layouts/BlogPost.astro';
import type { Blog } from '../../lib/types';

const { slug } = Astro.params;
let post: Blog | null = null;

if(!slug){
  return new Response(null, {
    status: 404,
    statusText: 'Not found'
  });
}

const response = await fetch(Astro.site + `post/${slug}.json`);
post = await response.json() as unknown as Blog;
const content = marked.parse(post?.content)
---

<BlogPost {...post}>
  <article set:html={content}></article>
</BlogPost>
