---
import { Markdown } from "@astropub/md"
import BlogPost from '../../layouts/BlogPost.astro';
import type { Blog } from '../../lib/types';

const { slug } = Astro.params;
let post: Blog | null = null;

if(!slug){
  return new Response(null, {
    status: 404,
    statusText: 'Not found'
  });
}

const response = await fetch(Astro.site + `post/${slug}.json`);
post = await response.json() as unknown as Blog;
---

<BlogPost {...post}>
  <Markdown of={post?.content || ""} />
</BlogPost>
